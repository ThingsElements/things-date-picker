<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../paper-time-picker/paper-time-picker.html">
<link rel="import" href="../paper-time-picker/paper-time-picker-dialog-style.html">

<link rel="import" href="../things-button/things-button.html">
<link rel="import" href="../things-input-field/things-input-field.html">

<!--
`<things-time-picker>` Things Time Picker

  Example
    
    <things-time-picker 
      label="Time Picker">
    </things-time-picker>

@demo demo/demo-things-time-picker.html
-->
<dom-module id="things-time-picker">
  <template>

    <things-input-field 
      label="[[label]]"
      type="text"
      name="{{name}}"
      value="{{selectedTime}}"
      readonly>
    </things-input-field>
    <paper-icon-button class="Navigation-icon" icon="alarm" on-tap="showTimePicker"></paper-icon-button>
    <paper-icon-button icon="icons:cancel" on-tap="clearField"></paper-icon-button>
    
    <paper-dialog id="timeDialog" modal class="paper-time-picker-dialog">
      <paper-time-picker id="timePicker" time="{{time}}"></paper-time-picker>
      <div class="buttons">
        <paper-button raised dialog-confirm on-tap="selectTime">Select</paper-button>
        <paper-button raised dialog-dismiss>Cancel</paper-button>
      </div>
    </paper-dialog>

  </template>

  <script type='text/javascript'>
    (function() {
      Polymer({
        is: 'things-time-picker',

        properties: {
          value: {
            type: String,
            observer: '_valueChanged'
          }
        },

        /**
         * 버튼 클릭시 Time picker를 dialog 타입으로 나타나게 한다.
         */
        showTimePicker: function() {
          this.$.timeDialog.toggle();
        },
        /**
         * time picker에서 시간을 결정하면 해당 날짜를 selectedTime에 초기화 한다.
         */
        selectTime: function() {
          this.selectedTime = this.time;
        },

        /**
         * 초기화된 데이터를 제거하는 기능 
         */
        clearField: function() {
          this.selectedTime = '';
        },

        /**
         * time picker field의 값이 변화 했을시 실행되며
         * selectedTime에 새로운 value를 초기화 한다.
         */
        _valueChanged: function(e) {
          this.selectedTime = e;
        }

      })
    })();
  </script>
</dom-module>